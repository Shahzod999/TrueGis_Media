import{a as w,u as x,b as j,r as d,j as s,s as v}from"./index-CDwt5ixs.js";import{B as y}from"./Button-BMeeCVoL.js";import{R as u}from"./react-svg.esm-BxdD_tHw.js";const S=w.injectEndpoints({endpoints:n=>({login:n.mutation({query:t=>({url:"/login",method:"POST",body:t})})})}),{useLoginMutation:f}=S,N=()=>{var p;const n=x(),t=j(),[m,{isLoading:o,error:i}]=f(),[a,c]=d.useState({username:"",password:""}),[r,g]=d.useState(!1),h=async()=>{try{const e=new FormData;e.append("username",a.username),e.append("password",a.password);const l=await m(e).unwrap();n(v(l.access_token)),l.access_token&&t("/")}catch(e){console.error("Ошибка при входе:",e)}};return s.jsxs("div",{className:"login-container container__side",children:[s.jsx("h2",{children:"Вход"}),s.jsx("input",{type:"text",placeholder:"Username",value:a.username,onChange:e=>c({...a,username:e.target.value})}),s.jsxs("div",{className:"password-wrapper",children:[s.jsx("input",{type:r?"text":"password",placeholder:"Password",value:a.password,onChange:e=>c({...a,password:e.target.value})}),s.jsx("span",{className:"icon",onClick:()=>g(!r),children:r?s.jsx(u,{src:"/public/svg/eye.svg"}):s.jsx(u,{src:"/public/svg/eyeSlash.svg"})})]}),s.jsx(y,{variant:"primary",onClick:h,disabled:o,children:o?"Загрузка...":"Войти"}),i&&s.jsxs("p",{className:"error",children:["Ошибка: ",((p=i.data)==null?void 0:p.message)||"Не удалось войти"]})]})};export{N as default};
