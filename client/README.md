<!-- https://tiles.openfreemap.org/styles/liberty карта-->
<!-- npm install react-map-gl maplibre-gl -->

# Структура проекта OKA

## Обзор

Проект использует React, TypeScript, Redux Toolkit, RTK Query и другие современные технологии для создания масштабируемого и поддерживаемого приложения.

## Установленные зависимости

### Основные зависимости
- React 19.0.0
- React DOM 19.0.0
- React Router DOM 7.0.2
- Redux Toolkit 2.3.0
- React Redux 9.1.2
- Sass 1.86.0
- MapLibre GL 5.2.0
- React Map GL 8.0.1
- i18next 24.2.1
- React i18next 15.4.0
- Swiper 11.1.15
- Lottie React 2.4.0
- React Icons 5.3.0
- UUID 11.0.3

### Зависимости для разработки
- TypeScript 5.7.2
- Vite 6.2.0
- ESLint 9.21.0
- @types/telegram-web-app 7.10.1

## Структура директорий

### Основные директории

#### `/src/components`
Содержит компоненты React, разделенные на категории:
- **`/ui`** - переиспользуемые UI компоненты (кнопки, инпуты, модальные окна)
- **`/common`** - общие компоненты, используемые в разных частях приложения
- **`/layouts`** - компоненты, определяющие структуру страниц

#### `/src/pages`
Содержит компоненты страниц приложения, каждая страница может представлять отдельный маршрут.

#### `/src/store`
Хранилище Redux для управления состоянием приложения:
- **`/slices`** - слайсы Redux Toolkit для управления отдельными частями состояния
- **`/selectors`** - селекторы для получения данных из хранилища
- **`/middleware`** - промежуточное ПО Redux для обработки действий

#### `/src/api`
Содержит логику для работы с API:
- **`/endpoints`** - эндпоинты RTK Query для взаимодействия с API
- **`/services`** - сервисы для работы с API

#### `/src/types`
Типы и интерфейсы TypeScript, используемые в приложении.

#### `/src/hooks`
Пользовательские хуки React для переиспользуемой логики.

#### `/src/utils`
Вспомогательные функции и утилиты.
- **`telegramWebApp.ts`** - инициализация и работа с Telegram WebApp API
- **`OrientationLock.ts`** - управление ориентацией экрана в Telegram WebApp
- **`hapticFeedback.ts`** - функции для работы с тактильной обратной связью в Telegram WebApp

#### `/src/constants`
Константы, используемые в приложении.

#### `/src/layout`
Компоненты макета, определяющие общую структуру приложения (хедер, футер, сайдбар).

### Дополнительные директории

#### `/src/features`
Функциональные модули, организованные по функциональным возможностям (а не по типам файлов).

#### `/src/shared`
Общие переиспользуемые модули, которые могут использоваться в разных частях приложения.

#### `/src/config`
Конфигурации для различных сред и параметров приложения.

#### `/src/lib`
Обертки и адаптеры для внешних библиотек.

#### `/src/models`
Модели данных и типы бизнес-логики.

#### `/src/routes`
Настройки маршрутизации приложения.

#### `/src/services`
Сервисы приложения для бизнес-логики.

#### `/src/styles`
Глобальные стили, темы и настройки стилей.

### Ресурсы

#### `/src/assets`
Статические ресурсы:
- **`/images`** - изображения
- **`/icons`** - иконки
- **`/fonts`** - шрифты

## Принципы организации кода

- **Модульность**: каждый модуль должен иметь четкую ответственность
- **Переиспользуемость**: компоненты и логика должны быть переиспользуемыми
- **Изоляция**: минимизация зависимостей между модулями
- **Согласованность**: следование общим паттернам и соглашениям

## Карта

Для отображения карты используется:
- MapLibre GL JS через react-map-gl
- Тайлы с https://tiles.openfreemap.org/styles/liberty

## Telegram WebApp

Проект интегрирован с Telegram WebApp API для работы в качестве веб-приложения внутри Telegram:

### Функциональность Telegram WebApp
- Автоматическая инициализация при запуске приложения
- Расширение до полного размера (tg.expand())
- Блокировка ориентации экрана в зависимости от текущего положения устройства
- Отключение вертикальных свайпов в мобильных версиях
- Подстройка цвета фона в соответствии с темой Telegram
- Тактильная обратная связь через HapticFeedback:
  - `hapticVibration()` - создает тактильный эффект различной интенсивности
  - `hapticVibrationByType()` - создает тактильный эффект в зависимости от типа уведомления (успех, ошибка, предупреждение)

### Автоматический запуск
При инициализации приложения в файле `main.tsx` автоматически вызывается функция `initTelegramWebApp()`, которая настраивает все необходимые параметры для корректной работы в среде Telegram.